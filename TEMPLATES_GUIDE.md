# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —à–∞–±–ª–æ–Ω–∞–º–∏

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ –®–∞–±–ª–æ–Ω—ã —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ API (–Ω–µ —Ö–∞—Ä–¥–∫–æ–¥)
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: `content: {template: "..."}` ‚Üí `content: "..."`

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —à–∞–±–ª–æ–Ω–æ–≤
```
http://localhost:3001/templates
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–æ–≤
- –í—Å–µ —à–∞–±–ª–æ–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è feed –∏ utm —à–∞–±–ª–æ–Ω—ã
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ç–∏–ø –∫–∞–∂–¥–æ–≥–æ —à–∞–±–ª–æ–Ω–∞

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ** - –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - **–û–ø–∏—Å–∞–Ω–∏–µ** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
   - **–®–∞–±–ª–æ–Ω** - Mustache —Ä–∞–∑–º–µ—Ç–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω"**
4. –®–∞–±–ª–æ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `backend/database.json`

#### 3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"** (–∏–∫–æ–Ω–∫–∞ –∫–∞—Ä–∞–Ω–¥–∞—à–∞)
2. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"**
4. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### 4. –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–£–¥–∞–ª–∏—Ç—å"** (–∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã)
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ
3. –®–∞–±–ª–æ–Ω –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üìã –§–æ—Ä–º–∞—Ç —à–∞–±–ª–æ–Ω–æ–≤

### Mustache —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

–®–∞–±–ª–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Mustache** —Ä–∞–∑–º–µ—Ç–∫—É:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<yml_catalog date="{{date}}">
  <shop>
    <name>{{shop_name}}</name>
    <offers>
{{#offers}}      <offer id="{{id}}" available="true">
        <url>{{url}}</url>
        <price>{{price}}</price>
        <name>{{name}}</name>
      </offer>
{{/offers}}    </offers>
  </shop>
</yml_catalog>
```

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `{{variable}}` - –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- `{{#array}}...{{/array}}` - —Ü–∏–∫–ª –ø–æ –º–∞—Å—Å–∏–≤—É
- `{{^condition}}...{{/condition}}` - —É—Å–ª–æ–≤–∏–µ (–µ—Å–ª–∏ false)

## üîß API Endpoints

### GET /api/templates
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã (–∏–ª–∏ –ø–æ —Ç–∏–ø—É `?type=feed`)

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "yandex_direct_yml",
    "name": "–Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç",
    "type": "feed",
    "description": "–ì–æ—Ç–æ–≤—ã–π YML —à–∞–±–ª–æ–Ω –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç",
    "content": "<?xml version=\"1.0\"...>",
    "createdAt": "2025-11-18T19:10:00.000000"
  }
]
```

### POST /api/templates
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ú–æ–π —à–∞–±–ª–æ–Ω",
  "type": "feed",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "content": "<?xml version=\"1.0\"...>"
}
```

### PUT /api/templates/{id}
–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —à–∞–±–ª–æ–Ω

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  "description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
  "content": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç"
}
```

### DELETE /api/templates/{id}
–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω

## üìä –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
–í—Å–µ —à–∞–±–ª–æ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `backend/database.json` –≤ —Å–µ–∫—Ü–∏–∏ `templates`:

```json
{
  "templates": [
    {
      "id": "yandex_direct_yml",
      "name": "–Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç",
      "type": "feed",
      "description": "...",
      "content": "...",
      "createdAt": "2025-11-18T19:10:00.000000",
      "updatedAt": "2025-11-18T19:10:00.000000"
    }
  ]
}
```

### –ë—ç–∫–∞–ø—ã
–ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è `database.json.backup`

## üöÄ –ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã

### 1. –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç (yandex_direct_yml)
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç:
- id, url, price, currencyId
- categoryId, picture, name, description

### 2. –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π YML (minimal_yml)
–ë–∞–∑–æ–≤—ã–π YML —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏

### 3. –í–ö–æ–Ω—Ç–∞–∫—Ç–µ (feed_vk)
Google Shopping —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ VK

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ PowerShell
```powershell
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã
$templates = (Invoke-WebRequest -Uri "http://localhost:8000/api/templates" -UseBasicParsing).Content | ConvertFrom-Json
$templates | Select-Object id, name, type

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω
$body = @{
    name = "–¢–µ—Å—Ç"
    type = "feed"
    content = "<test>{{value}}</test>"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:8000/api/templates" `
    -Method POST `
    -Body $body `
    -ContentType "application/json; charset=utf-8" `
    -UseBasicParsing
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3001/templates
2. –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
6. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —à–∞–±–ª–æ–Ω –æ—Å—Ç–∞–ª—Å—è** ‚úì

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –®–∞–±–ª–æ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã–µ **–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ API**
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `database.json`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Mustache engine (`pystache` –Ω–∞ backend)
