Требования к YML-фиду
Товары
Общие требования для товарных фидов:

Каждый товар должен иметь уникальный идентификатор.

Идентификаторы одного товара в разных фидах должны быть одинаковы, в том числе в и в фидах разных типов. Например, один и тот же товар в фиде Яндекс Маркета и в фиде Google Shopping должен иметь один и тот же идентификатор.

Подробнее о формате YML для фида Яндекс Маркета в Справке Яндекс Маркета.

Любой XML-документ может содержать только один корневой элемент. Формат YML в качестве корневого использует элемент <yml_catalog>. Атрибут date элемента <yml_catalog> должен соответствовать дате и времени генерации YML-файла на стороне заказчика. Дата должна иметь формат YYYY-MM-DD hh:mm.

Список товарных предложений содержится в элементе <offers>. Каждое товарное предложение описывается отдельным элементом <offer>. Элементы <currencies> и <categories> в элементе <shop> нужно указать перед списком товарных предложений. Подробнее о входящих в <shop> элементах в Справке Яндекс Маркета.

Типы описания офера

Есть два типа описания офера — упрощенный и произвольный. Типы описания оферов отличаются только способом передачи названия товара:

в оферах упрощенного типа название товара передается с помощью одного элемента <name>;
в оферах произвольного типа название товара передается с помощью трех элементов: <typePrefix>, <vendor> и <model>.
Можно применить комбинированный тип описания, где одновременно используются элементы для упрощенного и произвольного типов. Преимущество: больше элементов для генерации релевантного объявления​.

Упрощенный тип

Произвольный тип

Комбинированный тип

<name>Смартфон Samsung Galaxy S22 Ultra 8/128 ГБ, синий</name>
<typePrefix>Cмартфон</typePrefix>
<vendor>Samsung</vendor>
<model>Galaxy S22 Ultra 8/128 ГБ, синий</model>
<name>Смартфон Samsung Galaxy S22 Ultra 8/128 ГБ, синий</name>
<typePrefix>Cмартфон</typePrefix>
<vendor>Samsung</vendor>
<model>Galaxy S22 Ultra 8/128 ГБ, синий</model>
Внутри одного фида могут одновременно присутствовать оферы упрощенного и произвольного типа.

Примеры оферов

Базовый, более простой тип описания.

Пример:

  <offer id="0123456" available="true">
    <url>http://www.надежнаятехника.рф/catalog/element/index.php?from=ya_market&utm_source=ya_market&utm_medium=cpc</url>
    <price>1620.00</price>
    <oldprice>1800.00</oldprice>
    <currencyId>RUB</currencyId>
    <categoryId>19</categoryId>
    <picture>http://89.123.45.678/catalog/photo/19/6.JPG</picture>
    <picture>http://89.123.45.678/catalog/photo/19/7.JPG</picture>
    <store>false</store>
    <pickup>true</pickup>
    <delivery>false</delivery>
    <name>Антивирус ESET NOD32 Platinum Edition</name>
    <vendor>Eset</vendor>
    <vendorCode>NOD32-ENA-NS(BOX)-2-1</vendorCode>
    <description>Антивирус ESET NOD32 Platinum Edition - лицензия на 2 года NOD32-ENA-NS(BOX)-2-1</description>
    <video>http://89.123.45.678/catalog/video/19/6.MP4</video>
    <sales_notes>Оплата: Наличные, Б/Н, пластиковые карты, кредит</sales_notes>
    <manufacturer_warranty>true</manufacturer_warranty>
    <country_of_origin>Россия</country_of_origin>
    <age unit="year">18</age>
  </offer>



Атрибуты элемента <offer>

У атрибута type может быть только одно значение — "vendor.model", которое означает, что офер произвольного типа.

Произвольный тип: <offer id="1234567" type="vendor.model" available="true">
Упрощенный тип: <offer id="0123456" available="true">
Атрибут type влияет на то, наличие каких элементов будет проверять робот Директа при загрузке фида:

Не передаете атрибут type — офер упрощенного типа. Робот проверяет, присутствует ли элемент <name>. При его отсутствии офер будет проигнорирован и объявления для товара не сгенерируются.

Передаете атрибут type — офер произвольного типа. Обязательно наличие элементов <vendor> и <model>. При их отсутствии также возникнет ошибка и офер будет проигнорирован, объявления не сформируются.

Атрибут

Описание

Доступен для настройки фильтров

Обязательный элемент

id

Идентификатор товара.

Идентификаторы для каждого товара должны быть уникальными.

Убедитесь, что ID товаров в электронной коммерции совпадают с offer id, которые указаны в фиде. Это необходимо для корректного показа по оферному ретаргетингу в РСЯ. Оферный ретаргетинг доступен только для продвижения товаров сайта.

Значение ID может быть числовым, буквенным или буквенно-числовым. Допускается использование символов. Максимальная длина — 100 знаков.

Совет

Если вы планируете настраивать фильтр, используйте только числовые значения ID.

Пример
да

да

type

Тип описания предложения.

Значение должно быть vendor.model.

Если вы передаете атрибут type, то обозначаете, что используется произвольный тип описания. Директ проверяет, присутствуют ли элементы <vendor> и <model>. При их отсутствии офер будет проигнорирован и объявления для товара не сгенерируются.

нет

для произвольного типа описания

available

Возможность купить товар:

true — товар есть в наличии; false — товара нет в наличии.

По умолчанию система Директа считает, что все товары, присутствующие в фиде, есть в наличии. Если в фиде есть товары не в наличии, то необходимо указать для каждого офера атрибут available. С его помощью можно отфильтровать оферы для генерации объявлений.

Сведения о наличии товара, указанные в фиде, должны совпадать с информацией на странице перехода и на страницах оформления покупки.

да

обязательный, если используется фильтр по наличию товара

Элементы, входящие в <offer>

Элемент

Описание

Доступен для настройки фильтров

Обязательный элемент

name

Название товарного предложения.

В названии упрощенного предложения рекомендуется указывать наименование и код производителя, основные характеристики, важные для пользователя.

Для составления названия товара можно использовать универсальную формулу: ЧТО + КТО + МОДЕЛЬ и МОДИФИКАЦИЯ, где:

«ЧТО» — категория (тип) или подкатегория товара;
«КТО» — производитель, бренд, марка товара;
«МОДЕЛЬ» — название товара, серия, коллекция товара, артикул;
«МОДИФИКАЦИЯ» — важнейшие характеристики товара.
Чтобы Директ корректно создавал объявления, название товара должно совпадать с тем, что указано на странице перехода.

Название не должно содержать рекламный текст, например «бесплатная доставка». Также нельзя писать его заглавными буквами и использовать специальные символы для привлечения внимания.

Пример
да

для упрощенного типа

typePrefix

Тип / категория товара.

Указывая тип товара, руководствуйтесь тем, как этот товар позиционирует производитель. Например, «мобильный телефон», «стиральная машина», «угловой диван». Не используйте слишком общее обозначение типа товара и двусмысленные слова.

Пример
да

для произвольного типа

vendor

Производитель или бренд (торговая марка). Корректное указание бренда важно для удобства пользователей и способствует эффективности продаж.

Указывайте в качестве бренда название собственного бренда только в том случае, если продаете товар собственного производства или немарочный товар других производителей.

Пример
да

для произвольного типа

model

Модель и важные параметры (например, название, индекс модели, особенности модификации и т. д.).

Пример
да

для произвольного типа

categoryId

Идентификатор категории товара, присвоенный пользователем (положительное целое число не более 18 знаков). Товарное предложение может принадлежать только одной категории.

Пример
да

да

Элемент <offer> может содержать только один элемент <categoryId>.

url

URL страницы товара для продвижения сайта или трекинговая ссылка для продвижения мобильного приложения. Если вы продвигаете мобильное предложение, рекомендуем добавить отложенные диплинки.

Максимальная длина ссылки — 2048 символов. Допускаются кириллические ссылки. (Кириллические ссылки рекомендуем преобразовать с помощью Punycode.) URL‑адрес формируется на основе стандарта RFC 3986.

Пример
Как кодировать символы в URL?
да

да

picture

Ссылка на изображение.

Рекомендуем добавлять в фид 5 изображений. Например, в разных ракурсах или интерьерах. Товар должен занимать не менее 2/3 всей площади изображения.

В РСЯ однотоварный баннер может быть показан в формате карусели. Если в формате может показываться только одна картинка, то выбирается первое изображение, при условии, что его ширина и высота больше или равны размерам блока. Если первая картинка не подходит под эти требования, то рассматривается следующая.

Используйте изображение товара на белом фоне с белой рамкой минимум в один пиксель, без текстов и ярких шрифтов. В URL картинки нужно включить префикс http или https.

Технические требования:

размер в пикселях — от 450 по каждой стороне;
формат — JPG, PNG, WebP или GIF;
максимальный объем файла — 10 МБ.
Как изменить картинку в объявлении?
нет

для товарных объявлений и объявлений для страниц каталога в ЕПК;
для показов в товарной галерее.
description

Описание товарного предложения.

Передавайте подробное описание важных характеристик товара, по которым пользователь делает выбор.

Описание не должно содержать рекламный текст, например «бесплатная доставка», ссылки на сайт магазина, сведения о продаже, а также информацию о конкурентах, других товарах и аксессуарах к ним.

Пример
да

нет

sales_notes

Информация о заказе:

минимальной сумме заказа, минимальной партии товара, необходимости предоплаты;
вариантах оплаты, описания акций и распродаж.
Пример
нет

нет

param

Передача характеристик и параметров товара.

В атрибуте name обязательно укажите название параметра.

Яндекс  Директ учитывает при подборе запросов следующие 4 типа param: материал, цвет, пол, размер. Если используется ручное управление заголовками и текстами, то param не влияют на генерацию объявлений. Если используется автоматическая генерация, то генерируются несколько вариантов текстов на основе элементов офера, в том числе param.

Если производитель использует собственные обозначения цветов, например mineral purple, то дополнительно передайте общепринятое название этого цвета.

Пример
нет

нет

price

Цена, по которой данный товар можно приобрести.

Формат: целое или дробное число.

Разделитель целой и дробной части — точка.

Цена не должна равняться нулю и должна соответствовать стоимости товара на сайте.

Рекомендуемый элемент для Единой перфоманс-кампании.

Пример
да

для показов в товарной галерее

oldprice

Старая цена на товар, которая обязательно должна быть выше новой цены (price).

Формат: целое или дробное число.

Разделитель целой и дробной части — точка.

Цена не должна равняться нулю.

На сайте должны быть указаны обе цены: старая и текущая.

В объявлении может быть показана скидка, если в фиде присутствуют теги price и oldprice, и разница между ними 5% и более.

Пример
да

нет

currencyId

Код валюты.

Поддерживаемые значения
нет

если есть элемент price

video

Ссылка на видео с товаром.

Видео должно быть в формате MP4, до 45 с и отвечать прочим техническим требованиям.

Примечание

Если видео размещено на хостинге с http-протоколом, то на ресурсах с https-протоколом оно не будет показываться.

Лучше использовать ролик, снятый на стабильную камеру.

Рекомендации по содержанию:

Про товар, а не про бренд.
Без чрезмерного количества надписей, виньеток, блюра, без создания иллюзии, что на видео можно нажать кнопку либо взаимодействовать со звуком.
Демонстрируйте продукт и преимущества предложения в первом кадре видео.
Брендируйте видео — добавляйте в ролики логотип компании.
Подготовьте отдельные видео для каждого товара: так они будут соответствовать заголовку и тексту объявления. Для одного товара может быть только одно видео.

Показы только в РСЯ.

Пример
нет

нет

vendorCode

Код товара (указывается код производителя).

Пример
нет

нет

market_category

Категория товара, в которой он должен быть размещен на Яндекс Маркете.

да

нет

store

Возможность купить товар в розничном магазине:

да, 1, +, true — товар можно купить в розничном магазине;
нет, 0, −, false — возможность покупки в розничном магазине отсутствует.
да

нет

pickup

Возможность самовывоза из пунктов выдачи:

да, 1, +, true — товар можно забрать самостоятельно;
нет, 0, −, false — возможность самовывоза отсутствует.
да

нет

delivery

Возможность курьерской доставки товара:

да, 1, +, true — возможна курьерская доставка;
нет, 0, −, false — товар не может быть доставлен курьером.
нет

нет

manufacturer_warranty

Наличие гарантии:

да, 1, +, true — товар имеет официальную гарантию;
нет, 0, −, false — товар не имеет официальной гарантии.
да

нет

country_of_origin

Страна производства товара.

Пример
нет

нет

age

Возрастная категория товара.

Целое неотрицательное число, может быть представлено с префиксом «+» или без него. Если используется «+», он должен располагаться перед числом.

Рекомендуем указывать для товаров, которые предназначены для определенных возрастных групп.

Пример
да

нет

adult

Товар относится к категории «для взрослых»:

да, 1, +, true — да;
нет, 0, −, false — нет.
да

нет

downloadable

Возможность скачать товар:

да, 1, +, true — товар можно скачать;
нет, 0, −, false — товар нельзя скачать.
нет

нет

collectionId

Чтобы объявления показывались в комбинированном формате (объявление для страниц каталога и товарное объявление), передавайте связь товара с каталогом. Значение равно <collection id> в элементе <collections>.

Значение может быть числовым, буквенным или буквенно-числовым.

Один <offer> может содержать несколько <collectionId>.

да

рекомендуется, если в фиде используются <collections>

custom_label_0
custom_label_1
custom_label_2
custom_label_3
custom_label_4
Кастомные элементы. Произвольное описание. Латинские и кириллические буквы, цифры. Длина одного элемента — до 175 символов.

Кастомные элементы фида могут использоваться только для создания фильтров в Единой перфоманс-кампании. На генерацию креативов они не влияют. Фильтры используются для сегментирования оферов по специфичным параметрам, для которых не предусмотрены стандартные фильтры. Например, для e-com можно задать фильтр по принадлежности товара к конкретной акции.

да

нет

custom_score

Кастомный элемент. Значение — ноль или любое целое положительное число.

Кастомные элементы фида могут использоваться только для создания фильтров в Единой перфоманс-кампании. На генерацию креативов они не влияют. Фильтры используются для сегментирования оферов по специфичным параметрам, для которых не предусмотрены стандартные фильтры. Например, для e-com можно задать фильтр по маржинальности предложения.

да

нет

Каталоги
В YML-фиде можно передать информацию о каталогах товаров. В общей структуре файла элемент <collections> идет после элемента <offers>.

Информация о каталогах используется в Единой перфоманс-кампании только для продвижения сайтов. Если продвигается мобильное приложение, показов не будет.

Пример фида для продажи товаров:

  <?xml version="1.0" encoding="utf-8"?>
  <yml_catalog>
    <shop>

      <categories> ... </categories>
      <offers>
        <offer>...
          <collectionId>dukhi1</collectionId>
          <collectionId>kosmetika2</collectionId>
        </offer>
        <offer> ... </offer>
      </offers>

      <collections>
        <collection id="dukhi1">
          <url>https://example.ru/catalog/dukhi</url>
          <picture>https://example.ru/img/1.jpg</picture>
          <picture>https://example.ru/img/2.jpg</picture>
          <name>Мужские духи в интернет-магазине Example</name>
          <description>Мужские духи – подчеркните свой стиль </description>
        </collection>
        <collection id="kosmetika2">
          <url>https://example.ru/catalog/kosmetika</url>
          <picture>https://example.ru/img/3.jpg</picture>
          <picture>https://example.ru/img/4.jpg</picture>
          <name>Косметика для бритья в интернет-магазине Example</name>
          <description>Косметика для бритья: приятный ежедневный уход</description>
        </collection>
      </collections>

    </shop>
  </yml_catalog>

Элементы, входящие в <collections>

Элемент

Описание

Обязательный элемент

collection id

Уникальный ID каталога, не более 60 символов. Может быть числовым, буквенным, буквенно-числовым.

Идентификаторы для каждого каталога должны быть уникальны.

да

url

URL страницы каталога.

Максимальная длина ссылки — 2048 символов. Допускаются кириллические ссылки. (Кириллические ссылки рекомендуем преобразовать с помощью Punycode.) URL‑адрес формируется на основе стандарта RFC 3986.

В URL обязательно указать протокол http или https.

Как кодировать символы в URL?
да

picture

Ссылка на изображение.

Можно добавить несколько ссылок на изображения, каждую в собственном элементе picture.

Как изменить картинку в объявлении?
для показов в РСЯ и в Товарной галерее

name

Название каталога.

да

description

Описание каталога.

нет

Пользователи 1С-Битрикс могут быстро сформировать фид со страницами каталога с помощью инструкции.

Если вы работаете с платформой InSales и настроили автоматическое обновление фида, то в него добавится информация о каталогах — дополнительных действий не требуется. Также вы можете сформировать фид с каталогами с помощью произвольной выгрузки для Яндекс Маркета по инструкции.

Пользователи HostCMS могут включить выгрузку фида со страницами каталога по инструкции, см. раздел Коллекции.