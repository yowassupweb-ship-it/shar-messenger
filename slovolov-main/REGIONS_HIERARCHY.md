# Иерархическое отображение регионов

## Что изменилось

### 1. Обновлен `fallback-regions.ts`
- Добавлено поле `parentId` для всех регионов
- Создана иерархия: Россия → Федеральные округа → Области/Регионы → Города
- Добавлены новые регионы Москвы (ID: 98594, 98599, 98596, 98590, 98591, 98598)
- Добавлен регион "Санкт-Петербург и Ленинградская область" (ID: 10177)

### 2. Обновлен `RegionsPanel.tsx`
- Добавлена функция `getRegionLevel()` для определения уровня вложенности
- Регионы отображаются с отступами (24px на каждый уровень)
- Добавлен символ `└─` для визуализации иерархии дочерних регионов
- Обновлен интерфейс `RegionData` с полем `parent_id`

### 3. Обновлен `health/route.ts`
- Исправлено отображение fallback для Vercel KV
- Теперь показывает "База данных Neon Postgres" если DATABASE_URL настроен

## Структура иерархии

```
Россия (225)
├─ Центр (3)
│  ├─ Москва (213)
│  │  ├─ Зеленоград (98594)
│  │  ├─ Троицк (98599)
│  │  ├─ Новомосковский АО (98596)
│  │  ├─ Внуково (98590)
│  │  ├─ Бутово (98591)
│  │  └─ Солнцево (98598)
│  ├─ Московская область (1)
│  ├─ Москва и область (216)
│  ├─ Белгородская область (10716)
│  ├─ Тульская область (10758)
│  └─ ... другие регионы ЦФО
├─ Северо-Запад (17)
│  ├─ Санкт-Петербург (2)
│  ├─ Ленинградская область (10174)
│  ├─ Санкт-Петербург и Ленинградская область (10177)
│  └─ ... другие регионы СЗФО
├─ Юг (26)
├─ Поволжье (40)
├─ Урал (52)
├─ Сибирь (59)
└─ Дальний Восток (73)
```

## Как это выглядит

### Вкладка "Регионы"

```
Регион                                    Объем поиска    Доля, %
────────────────────────────────────────────────────────────────
Россия                                    6 206           24.5%
└─ Центр                                  5 373           21.2%
   └─ Москва и область                    4 929           19.5%
      └─ Москва                           2 888           11.4%
         └─ Зеленоград                    124             0.5%
         └─ Троицк                        117             0.5%
└─ Поволжье                               231             0.9%
└─ Северо-Запад                           210             0.8%
   └─ Санкт-Петербург и ЛО                104             0.4%
      └─ Санкт-Петербург                  80              0.3%
```

## Преимущества

1. **Понятная структура**: Сразу видно, что регион находится внутри округа
2. **Визуальная иерархия**: Отступы и символы показывают вложенность
3. **Полнота данных**: Все регионы из списка теперь имеют правильные названия
4. **Резервные данные**: fallbackRegions содержит полный список российских регионов

## Технические детали

- Уровень вложенности рассчитывается рекурсивно через `parentId`
- Отступ: `level * 24px + 16px` базовый padding
- Символ иерархии: `└─` для дочерних элементов
- Поддержка до 3 уровней вложенности (Страна → Округ → Область → Город)
