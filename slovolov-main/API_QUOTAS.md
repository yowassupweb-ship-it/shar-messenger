# Квоты Yandex Wordstat API

## Лимиты по умолчанию
- **10 запросов в секунду** (limitPerSecond)
- **1000 запросов в день** (dailyLimit)
- Дневная квота обновляется в **полночь по московскому времени**

## Расход квоты по методам

### Методы без расхода квоты
- `/v1/getRegionsTree` - **0 единиц**
- `/v1/userInfo` - **0 единиц**

### Методы с расходом квоты
- `/v1/topRequests` - **1 единица**
- `/v1/dynamics` - **1 единица**
- `/v1/regions` - **2 единицы** ⚠️

## Оптимизация использования

### Кеширование
Приложение использует кеширование на **30 минут** для всех запросов, чтобы минимизировать расход квоты.

### Последовательность запросов
Для избежания конфликтов и превышения лимита в секунду:

1. **Подбор слов** (вкладка "Подбор"):
   - `/v1/topRequests` - 1 единица
   - Итого: **1 единица квоты**

2. **Динамика** (вкладка "Динамика"):
   - `/v1/dynamics` - 1 единица
   - Итого: **1 единица квоты**

3. **Регионы** (вкладка "Регионы"):
   - `/v1/getRegionsTree` - 0 единиц (кешируется)
   - `/v1/regions` - 2 единицы
   - Итого: **2 единицы квоты**

### Проверка остатка квоты
Используйте вкладку "Настройки" → раздел "Лимиты API" для проверки:
- Текущий лимит в секунду
- Дневной лимит
- Остаток дневной квоты

## Рекомендации

1. **Избегайте частых запросов** для одной и той же фразы - используйте кеш
2. **Не переключайтесь быстро** между вкладками с одной фразой - дождитесь загрузки
3. **Планируйте анализ регионов** - он расходует 2 единицы квоты
4. **Проверяйте остаток квоты** перед массовым анализом

## Обработка ошибок

Если вы видите ошибку "Предыдущий запрос не завершился":
- Подождите 2-3 секунды
- Попробуйте снова
- Проверьте консоль браузера на наличие других ошибок

Если превышен лимит:
- **429 Too Many Requests** - превышен лимит в секунду (подождите 1 секунду)
- **403 Forbidden** - превышен дневной лимит (подождите до полуночи МСК)
